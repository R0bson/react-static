{"version":3,"sources":["../../../src/static/components/BodyWithMeta.js"],"names":["REGEX_FOR_SCRIPT","generateRouteInformation","__html","JSON","stringify","embeddedRouteInfo","replace","makeBodyWithMeta","head","route","clientScripts","children","rest","bodyProps","redirect","map","script","process","env","REACT_STATIC_PUBLICPATH"],"mappings":";;;;;;;;;AAAA;;;;;;;;AAEA,IAAMA,mBAAmB,kBAAzB;;AAEA,IAAMC,2BAA2B,SAA3BA,wBAA2B;AAAA,SAAsB;AACrDC,4CACyBC,KAAKC,SAAL,CAAeC,iBAAf,EAAkCC,OAAlC,CACvBN,gBADuB,EAEvB,UAFuB,CADzB;AADqD,GAAtB;AAAA,CAAjC;;AAQA;AACA;AACA;AACO,IAAMO,mBAAmB,SAAnBA,gBAAmB;AAAA,MAC9BC,IAD8B,QAC9BA,IAD8B;AAAA,MAE9BC,KAF8B,QAE9BA,KAF8B;AAAA,MAK9BJ,iBAL8B,QAK9BA,iBAL8B;AAAA,gCAM9BK,aAN8B;AAAA,MAM9BA,aAN8B,sCAMd,EANc;AAAA,SAO1B;AAAA,QAAGC,QAAH,SAAGA,QAAH;AAAA,QAAgBC,IAAhB;;AAAA,WACJ;AAAA;AAAA,mBAAUJ,KAAKK,SAAf,EAA8BD,IAA9B;AACGD,cADH;AAEG,OAACF,MAAMK,QAAP,IACC;AACE,cAAK,iBADP;AAEE,iCAAyBb,yBAAyBI,iBAAzB;AAF3B,QAHJ;AAQG,OAACI,MAAMK,QAAP,IACCJ,cAAcK,GAAd,CAAkB;AAAA,eAChB;AACE,eAAKC,MADP;AAEE,qBAFF;AAGE,gBAAK,iBAHP;AAIE,oBAAQC,QAAQC,GAAR,CAAYC,uBAApB,GAA8CH;AAJhD,UADgB;AAAA,OAAlB;AATJ,KADI;AAAA,GAP0B;AAAA,CAAzB","file":"BodyWithMeta.js","sourcesContent":["import React from 'react'\n\nconst REGEX_FOR_SCRIPT = /<(\\/)?(script)/gi\n\nconst generateRouteInformation = embeddedRouteInfo => ({\n  __html: `\n    window.__routeInfo = ${JSON.stringify(embeddedRouteInfo).replace(\n    REGEX_FOR_SCRIPT,\n    '<\"+\"$1$2'\n  )};`,\n})\n\n// Not only do we pass react-helmet attributes and the app.js here, but\n// we also need to  hard code site props and route props into the page to\n// prevent flashing when react mounts onto the HTML.\nexport const makeBodyWithMeta = ({\n  head,\n  route,\n  // This embeddedRouteInfo will be inlined into the HTML for this route.\n  // It should only include the full props, not the partials.\n  embeddedRouteInfo,\n  clientScripts = [],\n}) => ({ children, ...rest }) => (\n  <body {...head.bodyProps} {...rest}>\n    {children}\n    {!route.redirect && (\n      <script\n        type=\"text/javascript\"\n        dangerouslySetInnerHTML={generateRouteInformation(embeddedRouteInfo)}\n      />\n    )}\n    {!route.redirect &&\n      clientScripts.map(script => (\n        <script\n          key={script}\n          defer\n          type=\"text/javascript\"\n          src={`${process.env.REACT_STATIC_PUBLICPATH}${script}`}\n        />\n      ))}\n  </body>\n)\n"]}