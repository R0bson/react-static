{"version":3,"sources":["../../../../src/static/webpack/rules/cssLoader.js"],"names":["stage","isNode","cssLoader","initCSSLoader","test","loader","ExtractCssChunks","concat","options","importLoaders","minimize","sourceMap","ident","plugins","postcssFlexbugsFixes","browsers","flexbox"],"mappings":";;;;;;kBAwCe,gBAA6B;AAAA,MAAjBA,KAAiB,QAAjBA,KAAiB;AAAA,MAAVC,MAAU,QAAVA,MAAU;;AAC1C,MAAIC,YAAYC,cAAcH,KAAd,CAAhB;AACA,MAAIA,UAAU,MAAV,IAAoBC,MAAxB,EAAgC;AAC9B,WAAO;AACLG,YAAM,QADD;AAELC,cAAQH;AAFH,KAAP;AAID;;AAEDA,cAAY,CAACI,wCAAiBD,MAAlB,EAA0BE,MAA1B,CAAiCL,SAAjC,CAAZ,CAT0C,CASc;;AAExD,SAAO;AACLE,UAAM,QADD;AAELC,YAAQH;AAFH,GAAP;AAID,C;;AAvDD;;;;AACA;;;;AACA;;;;;;AAGA,SAASC,aAAT,CAAwBH,KAAxB,EAA+B;AAC7B,MAAME,YAAY,CAChB;AACEG,YAAQ,YADV;AAEEG,aAAS;AACPC,qBAAe,CADR;AAEPC,gBAAUV,UAAU,MAFb;AAGPW,iBAAW;AAHJ;AAFX,GADgB,EAShB;AACEN,YAAQ,gBADV;AAEEG,aAAS;AACP;AACA;AACAG,iBAAW,IAHJ;AAIPC,aAAO,SAJA;AAKPC,eAAS;AAAA,eAAM,CACbC,8BADa,EAEb,4BAAa;AACXC,oBAAU,CACR,KADQ,EAER,iBAFQ,EAGR,aAHQ,EAIR,YAJQ,CADC;AAOXC,mBAAS,SAPE,CAOS;AAPT,SAAb,CAFa,CAAN;AAAA;AALF;AAFX,GATgB,CAAlB;AA+BA,SAAOd,SAAP;AACD","file":"cssLoader.js","sourcesContent":["import autoprefixer from 'autoprefixer'\nimport ExtractCssChunks from 'extract-css-chunks-webpack-plugin'\nimport postcssFlexbugsFixes from 'postcss-flexbugs-fixes'\n\n\nfunction initCSSLoader (stage) {\n  const cssLoader = [\n    {\n      loader: 'css-loader',\n      options: {\n        importLoaders: 1,\n        minimize: stage === 'prod',\n        sourceMap: false,\n      },\n    },\n    {\n      loader: 'postcss-loader',\n      options: {\n        // Necessary for external CSS imports to work\n        // https://github.com/facebookincubator/create-react-app/issues/2677\n        sourceMap: true,\n        ident: 'postcss',\n        plugins: () => [\n          postcssFlexbugsFixes,\n          autoprefixer({\n            browsers: [\n              '>1%',\n              'last 4 versions',\n              'Firefox ESR',\n              'not ie < 9', // React doesn't support IE8 anyway\n            ],\n            flexbox: 'no-2009', // I'd opt in for this - safari 9 & IE 10.\n          }),\n        ],\n      },\n    },\n  ]\n  return cssLoader\n}\n\nexport default function ({ stage, isNode }) {\n  let cssLoader = initCSSLoader(stage)\n  if (stage === 'node' || isNode) {\n    return {\n      test: /\\.css$/,\n      loader: cssLoader,\n    }\n  }\n\n  cssLoader = [ExtractCssChunks.loader].concat(cssLoader) // seeing as it's HMR, why not :)\n\n  return {\n    test: /\\.css$/,\n    loader: cssLoader,\n  }\n}\n"]}