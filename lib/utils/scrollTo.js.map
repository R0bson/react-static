{"version":3,"sources":["../../src/utils/scrollTo.js"],"names":["scrollTo","ease","t","defaultOptions","duration","offset","context","window","getTop","element","contextScrollHeight","contextVisibleHeight","Math","min","getBoundingClientRect","top","pageYOffset","getPosition","start","end","elapsed","easeFn","options","innerHeight","scrollHeight","offsetHeight","document","body","clock","Date","now","Promise","step","parseInt","scrollTop","scroll","resolve"],"mappings":";;;;;;;;kBAqBwBA,Q;;AArBxB;;;;;;AACA;AACA,IAAMC,OAAO,SAAPA,IAAO;AAAA,SAAMC,IAAI,GAAJ,GAAU,IAAIA,CAAJ,GAAQA,CAAlB,GAAsB,CAAC,CAAD,GAAK,CAAC,IAAI,IAAIA,CAAT,IAAcA,CAA/C;AAAA,CAAb;;AAEA,IAAMC,iBAAiB;AACrBC,YAAU,GADW;AAErBC,UAAQ,CAFa;AAGrBC,WAAS,OAAOC,MAAP,KAAkB,WAAlB,IAAiCA;AAHrB,CAAvB;;AAMA,IAAMC,SAAS,SAATA,MAAS,CAACC,OAAD,EAAUJ,MAAV,EAAkBK,mBAAlB,EAAuCC,oBAAvC;AAAA,SACbC,KAAKC,GAAL,CACEJ,QAAQK,qBAAR,GAAgCC,GAAhC,GAAsCR,OAAOS,WAA7C,GAA2DX,MAD7D,EAEEK,sBAAsBC,oBAFxB,CADa;AAAA,CAAf;;AAMA,IAAMM,cAAc,SAAdA,WAAc,CAACC,KAAD,EAAQC,GAAR,EAAaC,OAAb,EAAsBhB,QAAtB,EAAgCiB,MAAhC,EAA2C;AAC7D,MAAID,UAAUhB,QAAd,EAAwB,OAAOe,GAAP;AACxB,SAAOD,QAAQ,CAACC,MAAMD,KAAP,IAAgBG,OAAOD,UAAUhB,QAAjB,CAA/B;AACD,CAHD;;AAKe,SAASJ,QAAT,CAAmBS,OAAnB,EAA4Ba,OAA5B,EAAqC;AAAA,2CACPnB,cADO,EACYmB,OADZ;AAAA,MAC1ClB,QAD0C,yBAC1CA,QAD0C;AAAA,MAChCC,MADgC,yBAChCA,MADgC;AAAA,MACxBC,OADwB,yBACxBA,OADwB;;AAElD,MAAMY,QAAQX,OAAOS,WAArB;AACA,MAAIO,oBAAJ;AACA,MAAIC,qBAAJ;AACA,MAAIlB,YAAYC,MAAhB,EAAwB;AACtBgB,kBAAcjB,QAAQmB,YAAtB;AACAD,mBAAelB,QAAQkB,YAAvB;AACD,GAHD,MAGO;AACLD,kBAAchB,OAAOgB,WAArB;AACAC,mBAAeE,SAASC,IAAT,CAAcH,YAA7B;AACD;AACD,MAAMI,QAAQC,KAAKC,GAAL,KAAa,CAA3B;AACA,SAAO,IAAIC,OAAJ,CAAY,mBAAW;AAC5B,QAAMC,OAAO,SAAPA,IAAO,GAAM;AACjB,UAAMZ,UAAUS,KAAKC,GAAL,KAAaF,KAA7B;AACA,UAAMT,MACJ,OAAOV,OAAP,KAAmB,QAAnB,GACIwB,SAASxB,OAAT,CADJ,GAEID,OAAOC,OAAP,EAAgBJ,MAAhB,EAAwBmB,YAAxB,EAAsCD,WAAtC,CAHN;AAIA,UAAIjB,YAAYC,MAAhB,EAAwB;AACtBD,gBAAQ4B,SAAR,GAAoBjB,YAAYC,KAAZ,EAAmBC,GAAnB,EAAwBC,OAAxB,EAAiChB,QAAjC,EAA2CH,IAA3C,CAApB;AACD,OAFD,MAEO;AACLM,eAAO4B,MAAP,CAAc,CAAd,EAAiBlB,YAAYC,KAAZ,EAAmBC,GAAnB,EAAwBC,OAAxB,EAAiChB,QAAjC,EAA2CH,IAA3C,CAAjB;AACD;;AAED,UAAI,OAAOG,QAAP,KAAoB,WAApB,IAAmCgB,UAAUhB,QAAjD,EAA2D;AACzDgC;AACA;AACD;;AAED;AACA,UAAIlB,UAAUC,GAAd,EAAmB;AACjBiB;AACA;AACD;;AAED,yBAAIJ,IAAJ;AACD,KAxBD;AAyBA,uBAAIA,IAAJ;AACD,GA3BM,CAAP;AA4BD","file":"scrollTo.js","sourcesContent":["import raf from 'raf'\n//\nconst ease = t => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t)\n\nconst defaultOptions = {\n  duration: 800,\n  offset: 0,\n  context: typeof window !== 'undefined' && window,\n}\n\nconst getTop = (element, offset, contextScrollHeight, contextVisibleHeight) =>\n  Math.min(\n    element.getBoundingClientRect().top + window.pageYOffset + offset,\n    contextScrollHeight - contextVisibleHeight\n  )\n\nconst getPosition = (start, end, elapsed, duration, easeFn) => {\n  if (elapsed > duration) return end\n  return start + (end - start) * easeFn(elapsed / duration)\n}\n\nexport default function scrollTo (element, options) {\n  const { duration, offset, context } = { ...defaultOptions, ...options }\n  const start = window.pageYOffset\n  let innerHeight\n  let scrollHeight\n  if (context !== window) {\n    innerHeight = context.offsetHeight\n    scrollHeight = context.scrollHeight\n  } else {\n    innerHeight = window.innerHeight\n    scrollHeight = document.body.scrollHeight\n  }\n  const clock = Date.now() - 1\n  return new Promise(resolve => {\n    const step = () => {\n      const elapsed = Date.now() - clock\n      const end =\n        typeof element === 'number'\n          ? parseInt(element)\n          : getTop(element, offset, scrollHeight, innerHeight)\n      if (context !== window) {\n        context.scrollTop = getPosition(start, end, elapsed, duration, ease)\n      } else {\n        window.scroll(0, getPosition(start, end, elapsed, duration, ease))\n      }\n\n      if (typeof duration === 'undefined' || elapsed > duration) {\n        resolve()\n        return\n      }\n\n      // Sanity check to prevent taking over the scroll once we prematurely got to the element\n      if (start === end) {\n        resolve()\n        return\n      }\n\n      raf(step)\n    }\n    raf(step)\n  })\n}\n"]}