{"version":3,"sources":["../../src/node/makePageRoutes.js"],"names":["makePageRoutes","items","pageSize","pageToken","route","decorate","itemsCopy","pages","length","push","splice","totalPages","firstPage","routes","map","page","i","path"],"mappings":";;;;;;;;kBAAwBA,c;;;;AAAT,SAASA,cAAT,OAEZ;AAAA,MADDC,KACC,QADDA,KACC;AAAA,MADMC,QACN,QADMA,QACN;AAAA,4BADgBC,SAChB;AAAA,MADgBA,SAChB,kCAD4B,MAC5B;AAAA,MADoCC,KACpC,QADoCA,KACpC;AAAA,MAD2CC,QAC3C,QAD2CA,QAC3C;;AACD,MAAMC,yCAAgBL,KAAhB,EAAN,CADC,CAC4B;AAC7B,MAAMM,QAAQ,EAAd,CAFC,CAEgB;;AAEjB,SAAOD,UAAUE,MAAjB,EAAyB;AACvB;AACAD,UAAME,IAAN,CAAWH,UAAUI,MAAV,CAAiB,CAAjB,EAAoBR,QAApB,CAAX;AACD;;AAED,MAAMS,aAAaJ,MAAMC,MAAzB;;AAEA;AACA,MAAMI,YAAYL,MAAM,CAAN,CAAlB;;AAEA,MAAMM,uBAECT,KAFD,EAGCC,SAASO,SAAT,EAAoB,CAApB,EAAuBD,UAAvB,CAHD,6BAMDJ,MAAMO,GAAN,CAAU,UAACC,IAAD,EAAOC,CAAP;AAAA,wBACRZ,KADQ,IACD;AACVa,YAASb,MAAMa,IAAf,SAAuBd,SAAvB,UAAoCa,IAAI,CAAxC;AAFW,OAGRX,SAASU,IAAT,EAAeC,IAAI,CAAnB,EAAsBL,UAAtB,CAHQ;AAAA,GAAV,CANC,EAAN;;AAaA,SAAOE,MAAP;AACD","file":"makePageRoutes.js","sourcesContent":["export default function makePageRoutes ({\n  items, pageSize, pageToken = 'page', route, decorate,\n}) {\n  const itemsCopy = [...items] // Make a copy of the items\n  const pages = [] // Make an array for all of the different pages\n\n  while (itemsCopy.length) {\n    // Splice out all of the items into separate pages using a set pageSize\n    pages.push(itemsCopy.splice(0, pageSize))\n  }\n\n  const totalPages = pages.length\n\n  // Move the first page out of pagination. This is so page one doesn't require a page number.\n  const firstPage = pages[0]\n\n  const routes = [\n    {\n      ...route,\n      ...decorate(firstPage, 1, totalPages), // and only pass the first page as data\n    },\n    // map over each page to create an array of page routes, and spread it!\n    ...pages.map((page, i) => ({\n      ...route, // route defaults\n      path: `${route.path}/${pageToken}/${i + 1}`,\n      ...decorate(page, i + 1, totalPages),\n    })),\n  ]\n\n  return routes\n}\n"]}